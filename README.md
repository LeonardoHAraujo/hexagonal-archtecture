# Ports and adapters archtecture

*Powered by Leonardo Araújo*

![Hexagonal archtecture](https://elemarjr.com/wp-content/uploads/2017/04/hexagonal_style-1.jpg)

> Initial API example using Node.js + TypeScript with OOP and hexagonal archtecture.

## Required global dependencies

- Node.js v16
- Yarn v1

## Up & Running

1. Install local dependencies:

```terminal
yarn
```

2. Rename env:

```terminal
mv .env.example .env
```

3. Get the server up:

```terminal
yarn dev
```

## Tree structure

This project uses Hexagonal Architecture (Ports & Adapters) with Object-oriented programming.

```terminal
.
├── package.json
├── prisma
│   ├── dev.db
│   ├── migrations
│   │   ├── 20230106151503_init
│   │   │   └── migration.sql
│   │   └── migration_lock.toml
│   └── schema.prisma
├── README.md
├── src
│   ├── adapters
│   │   ├── express
│   │   │   ├── factories
│   │   │   │   └── add-user.factory.ts
│   │   │   ├── index.ts
│   │   │   └── routes
│   │   │       └── user.routes.ts
│   │   └── prisma
│   │       ├── index.ts
│   │       └── repositories
│   │           └── add-user.repository.ts
│   ├── app.ts
│   ├── domain
│   │   ├── entities
│   │   │   └── user.entity.ts
│   │   ├── repositories
│   │   │   └── add-user.repository.ts
│   │   └── usecases
│   │       └── add-user.usecase.ts
│   └── index.ts
└── tsconfig.json
```

| Directory / File              | Description                                         |
| ----------------------------- | ------------------------------------------------------------- |
| `package.json`                | Your package manager.|
| `prisma`                      | Configuration of the prisma library.|
| `src`                         | All source code write in TypeScript must be in this directory.|
| `src/index.ts`                | Main entry point for initial configuration of the project. Do not edit this file. Start with src/app.ts.|
| `src/app.ts`                  | Project entry point. You can call your providers here.|
| `src/domain`                  | Pure domain implementations, without external dependencies.|
| `src/domain/entities`         | It's database modeling.|
| `src/domain/command (not implemented)` | Are domain-specific commands that are used by more than one use case. So we inject it as a dependency for the use case.|
| `src/domain/providers (not implemented)` | Are the interfaces/namespaces of the providers.|
| `src/domain/repositories`     | Are the interfaces/namespaces of the repositories.|
| `src/domain/usecases`         | Are the classes that receive dependency injection and drive the business rule.|
| `src/adapters`                | This is a external world.|
| `src/adapters/prisma`         | Are the service from external world, in this folder have helpers and main core from the database library.|
| `src/adapters/express`        | They are services from the outside world too, in this folder there is the use case factories.|

## Important usage information

### Rules of archtecture

- The `domain` of the application does not know anyone from the outside world, they can only talk to each other.
- The `adapters` layer is the outputs to the outside world, any new service from the outside world that is needed can be applied there.

## License

MIT
